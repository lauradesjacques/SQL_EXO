<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Requetes SQL</title>
    <link href="style.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1 style="font-size: 40px;">Exercice Requetes SQL</h1>

      <h4>1. Créer la base de donnée sous le nom de 'Boutique'</h4>

      <p>CREATE DATABASE IF NOT EXISTS Boutique ;</p>

      <h4>2. Création des tables (Manufacturers, Products)</h4>
      <p>
        CREATE TABLE Manufacturers ( Code INT PRIMARY KEY NOT NULL
        AUTO_INCREMENT, Name VARCHAR(50) );
      </p>
      <p>
        CREATE TABLE Products ( Code INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
        Name VARCHAR(50), Price REAL, ManuID INT, FOREIGN KEY (ManuID)
        REFERENCES Manufacturers(Code));
      </p>

      <h4>3. Inserer dans la table Manufacturers les valeurs</h4>
      <p>
        INSERT INTO `Manufacturers` (`Name`) VALUES ('Sony'); <br/>
        INSERT INTO `Manufacturers` (`Name`) VALUES ('Creative Labs'); <br/>
        INSERT INTO `Manufacturers` (`Name`) VALUES ('Hewlett-Packard');<br/>
        INSERT INTO `Manufacturers` (`Name`) VALUES ('Lenovo');<br/>
        INSERT INTO `Manufacturers` (`Name`) VALUES ('Winchester');<br/>
        INSERT INTO `Manufacturers` (`Name`) VALUES ('Apple');<br/>
      </p>
      <h4>4. Inserer dans la table Products les valeurs</h4>
      <p>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('Hard drive', '240','5');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('Memory', '120','6');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('ZIP drive', '150','4');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('Floppy Disk', '5','6');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('Monitor', '240','1');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('DVD drive', '180','2');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('CD drive', '90','2');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('Printer', '270','3');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('Toner cartridge', '66','3');<br/>
        INSERT INTO `Products` (`Name`, `Price`, `ManuID`) VALUES ('DVD burner', '180','2');<br/>
      </p>

      <h4>5. Selectionner le nom de tout les produits </h4>
      <p>
        SELECT Name FROM Products;
      </p>

      <h4> 6. Sélectionner les noms et les prix de tous les produits présents dans votre database</h4>
      <p>
        SELECT Name, Price FROM Products;
      </p>

      <h4>7. Sélectionner le nom des produits dont le prix est inférieur ou égal à 200 $</h4>
      <p>
        SELECT Name FROM Products WHERE Price <= 200;
      </p>

      <h4>8. Sélectionner tous les produits dont le prix est compris entre 50$ et 120$ </h4>
      <p>
        SELECT * FROM Products WHERE Price BETWEEN '50' AND '120';
      </p>

      <h4>9. Sélectionner le nom et le prix en centimes (càd le prix doit être multiplié par 100)</h4>
      <p>
        SELECT Name, Price*100 AS PriceCents FROM Products;
      </p>

      <h4>10. Calculer le prix moyen de tous les produits</h4>
      <p>
        SELECT SUM(Price)/COUNT(Price) AS PriceMean FROM Products;
      </p>

      <h4>11. Calculer le prix moyen de tous les produits dont le code fabriquant est égal à 2 </h4>
      <p>
        SELECT SUM(Price)/COUNT(Price) AS PriceMean FROM Products WHERE ManuID = 2;
      </p>

      <h4>12. Calculer le nombre de produits dont le prix est supérieur ou égal à 180$ </h4>
      <p>
        SELECT COUNT(Price) AS nb_products FROM Products WHERE Price >= 180;
      </p>

      <h4> 13. Sélectionner le nom et le prix de tous les produits dont le prix est supérieur ou égal à 180$,
        et trier par prix par ordre décroissant puis nom par ordre croissant</h4>
      <p>
        SELECT Name, Price FROM Products WHERE Price >= 180 ORDER BY Price DESC, Name ASC;
      </p>
      <h4> 14. Sélectionner toutes les données des produits y compris les données relatives aux fabricants</h4>
      <p>
        SELECT * FROM Products JOIN Manufacturers ON Products.ManuID=Manufacturers.code;
      </p>

      <h4>Je renomme mes colonnes </h4>
      <p>
        ALTER TABLE Products CHANGE Name NameP VARCHAR(50) ;
        ALTER TABLE Manufacturers CHANGE Name NameM VARCHAR(50);
      </p>

      <h4>15. Sélectionner le nom du produit, le prix et le nom du fabriquant de tous les produits </h4>
      <p>
        SELECT NameP, Price, NameM FROM Products JOIN Manufacturers ON Products.ManuID=Manufacturers.code;
      </p>

      <h4>16. Calculer le prix moyen des produits de chaque fabricant, en indiquant uniquement celui-ci
        par son code.</h4>
      <p>
        SELECT AVG(Price) AS MeanProduct, Manufacturers.Code FROM Products JOIN Manufacturers ON Products.ManuID=Manufacturers.code GROUP BY Manufacturers.Code;
      </p>

      <h4>17. Calculer le prix maximum d'un produit vendu par fabriquant.</h4>
      <p>
        SELECT MAX(Price) AS MaxPrice, Manufacturers.NameM FROM Products JOIN Manufacturers ON Products.ManuID=Manufacturers.code GROUP BY Manufacturers.NameM ;
      </p>

      <h4>18. Sélectionner les noms des fabricants dont les produits ont un prix moyen supérieur ou égal )
        150$</h4>
      <p>
        SELECT Manufacturers.NameM FROM Products JOIN Manufacturers ON Products.ManuID=Manufacturers.code WHERE (SELECT AVG(Price) >= 150) GROUP BY Manufacturers.NameM;
      </p>

      <h4> 19. Sélectionner les noms et les prix du produit le moins cher et le plus cher</h4>
      <p>
        SELECT NameP, Price FROM Products WHERE price IN ((SELECT MIN(Price) FROM Products),( SELECT MAX(Price)FROM Products)) ;
      </p>

      <h4>20. Ajouter un nouveau produit : Loudspeakers, 70$, manufacturer 2</h4>
      <p>
        INSERT INTO `Products` (`NameP`, `Price`, `ManuID`) VALUES ('Loudspeakers', '70','2');
      </p>
      <h4>21. Mettre à jour le nom du produit 8 en « Laser Print »</h4>
      <p>
        UPDATE Products SET NameP='Laser Print' WHERE Code=8;
      </p>

      <h4>22. Appliquer une remise de 10% à tous les produits et stocker ce résultat dans une nouvelle
        colonne de la table</h4>
      <p>
        ALTER TABLE Products ADD Remise FLOAT;
        UPDATE Products SET Remise = Price*0.90;
      </p>
      <i>Pensez à decocher safe update dans preferences SQL </i>

      <h4>23. Appliquer une remise de 10% à tous les produits dont le prix est supérieur ou égal à 120$</h4>
      <p>
        UPDATE Products SET Remise = Price*0.90 WHERE Price >= 120;
      </p>

  </body>
</html>
